<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vocab SRS - Review Session</title>
    <link rel="stylesheet" href="../css/review.css">
</head>
<body>
    <div class="review-container">
        <!-- Header -->
        <div class="review-header">
            <div class="header-left">
                <button id="close-review" class="btn btn-text">
                    <span class="btn-icon">‚úï</span> Close Review
                </button>
            </div>
            <div class="header-center">
                <h1 class="review-title">üìö Vocab SRS Review</h1>
                <div class="review-progress">
                    <span id="current-card">1</span> / <span id="total-cards">10</span>
                </div>
            </div>
            <div class="header-right">
                <div class="session-stats">
                    <span class="stat-item">Reviewed: <strong id="reviewed-count">0</strong></span>
                    <span class="stat-item">Accuracy: <strong id="accuracy-display">0%</strong></span>
                    <span class="stat-item">Active Time: <strong id="active-time-display">0 min</strong></span>
                </div>
            </div>
        </div>
        
        <!-- Main Review Area -->
        <div class="review-main">
            <!-- Vietnamese meaning shown first -->
            <div class="meaning-card">
                <div class="meaning-display" id="meaning-display">v√≠ d·ª•</div>
                <div class="example-display" id="example-display" style="display: none;">This is an example sentence.</div>
                
                <div class="hint-section">
                    <button id="hint-btn" class="btn btn-hint">
                        <span class="btn-icon">üí°</span> Hint
                    </button>
                </div>
                
                <div class="audio-section" style="display: none;">
                    <button id="play-audio-btn" class="btn btn-audio">
                        <span class="btn-icon">üîä</span> Pronunciation
                    </button>
                </div>
            </div>
            
            <!-- Input section -->
            <div class="input-section" id="input-section">
                <div class="input-prompt">What is the English word?</div>
                <input type="text" id="answer-input" placeholder="Type your answer..." class="answer-input"
                       autocomplete="off" spellcheck="false" 
                       onpaste="return false;" ondrop="return false;" 
                       oncontextmenu="return false;">
                <div class="input-buttons">
                    <button id="submit-answer-btn" class="btn btn-primary">
                        <span class="btn-icon">‚úì</span> Check Answer
                    </button>
                    <button id="skip-word-btn" class="btn btn-outline">
                        <span class="btn-icon">‚è≠</span> Skip
                    </button>
                </div>
            </div>
            
            <!-- Result section (shown after answer check) -->
            <div class="result-section" id="result-section" style="display: none;">
                <div class="answer-comparison">
                    <div class="answer-row">
                        <span class="answer-label">Your answer:</span>
                        <span class="user-answer" id="user-answer">example</span>
                    </div>
                    <div class="answer-row">
                        <span class="answer-label">Correct answer:</span>
                        <span class="correct-answer" id="correct-answer">example</span>
                    </div>
                    <div class="phonetic-row">
                        <span class="phonetic-display" id="phonetic-display">/…™…°Ààz√¶mp…ôl/</span>
                    </div>
                </div>
                
                <div class="quality-buttons">
                    <div class="quality-label">How difficult was this word?</div>
                    <div class="quality-grid">
                        <button class="quality-btn quality-0" data-quality="0">
                            <div class="quality-number">0</div>
                            <div class="quality-name">Blackout</div>
                        </button>
                        <button class="quality-btn quality-1" data-quality="1">
                            <div class="quality-number">1</div>
                            <div class="quality-name">Incorrect</div>
                        </button>
                        <button class="quality-btn quality-2" data-quality="2">
                            <div class="quality-number">2</div>
                            <div class="quality-name">Hard</div>
                        </button>
                        <button class="quality-btn quality-3" data-quality="3">
                            <div class="quality-number">3</div>
                            <div class="quality-name">Correct</div>
                        </button>
                        <button class="quality-btn quality-4" data-quality="4">
                            <div class="quality-number">4</div>
                            <div class="quality-name">Easy</div>
                        </button>
                        <button class="quality-btn quality-5" data-quality="5">
                            <div class="quality-number">5</div>
                            <div class="quality-name">Perfect</div>
                        </button>
                    </div>
                </div>
                
                <!-- End Review Option -->
                <div class="end-review-section">
                    <button id="end-review-btn" class="btn btn-outline">
                        <span class="btn-icon">üèÅ</span> End Review & Save Progress
                    </button>
                    <div class="progress-info">
                        <span id="progress-text">Progress: <span id="current-progress">0</span> / <span id="total-progress">0</span> words completed</span>
                    </div>
                </div>
                
                <!-- Retype section for wrong/skipped answers -->
                <div class="retype-section" id="retype-section" style="display: none;">
                    <div class="retype-prompt">Please type the correct word to continue:</div>
                    <input type="text" id="retype-input" placeholder="Type the correct word..." class="answer-input" 
                           autocomplete="off" spellcheck="false" 
                           onpaste="return false;" ondrop="return false;" 
                           oncontextmenu="return false;">
                    <button id="retype-submit-btn" class="btn btn-primary">
                        <span class="btn-icon">‚úì</span> Continue
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Review Complete Screen -->
        <div class="review-complete" id="review-complete" style="display: none;">
            <div class="complete-header">
                <div class="complete-icon">üéâ</div>
                <h2>Review Complete!</h2>
                <p>Great job! You've finished today's review session.</p>
            </div>
            
            <div class="complete-stats">
                <div class="complete-stat">
                    <span class="stat-value" id="final-reviewed-count">0</span>
                    <span class="stat-text">words reviewed</span>
                </div>
                <div class="complete-stat">
                    <span class="stat-value" id="final-accuracy-rate">0%</span>
                    <span class="stat-text">accuracy</span>
                </div>
                <div class="complete-stat">
                    <span class="stat-value" id="remaining-words-count">0</span>
                    <span class="stat-text">words remaining</span>
                </div>
            </div>
            
            <div class="complete-actions">
                <button id="continue-review-btn" class="btn btn-primary" style="display: none;">
                    <span class="btn-icon">‚ñ∂Ô∏è</span>
                    Continue Remaining Words
                </button>
                <button id="close-window-btn" class="btn btn-primary">
                    <span class="btn-icon">‚úì</span>
                    Close Window
                </button>
            </div>
        </div>
        
        <!-- Loading and Error States -->
        <div class="loading-state" id="loading-state" style="display: none;">
            <div class="spinner"></div>
            <p>Loading review session...</p>
        </div>
        
        <div class="error-state" id="error-state" style="display: none;">
            <div class="error-icon">‚ö†Ô∏è</div>
            <p id="error-message">Something went wrong</p>
            <button id="retry-btn" class="btn btn-secondary">Try Again</button>
        </div>
    </div>
    
    <script src="../../core/production-logger.js"></script>
    <script src="../../core/utils.js"></script>
    <script src="../../core/api.js"></script>
    <script src="../js/analytics.js"></script>
    <script src="../../advanced-srs.js"></script>
    <script src="../../performance-optimizer.js"></script>
    <script src="../../managers/integration-manager.js"></script>
    <script src="../../keyboard-shortcuts.js"></script>
    <script src="../js/review.js"></script>
</body>
</html>