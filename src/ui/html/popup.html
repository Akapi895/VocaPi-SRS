<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vocab SRS</title>
    <link rel="stylesheet" href="../css/popup.css">
</head>
<body>
    <div class="popup-container">
        <!-- Header -->
        <div class="popup-header">
            <div class="header-content">
                <h1 class="popup-title">üìö Vocab SRS</h1>
                <p class="popup-subtitle">Spaced Repetition Learning</p>
            </div>
            <button id="help-btn" class="help-button" title="Keyboard Shortcuts (Alt+H)">
                <span class="btn-icon">‚å®Ô∏è</span>
            </button>
        </div>
        
        <!-- Stats Section -->
        <div class="stats-section">
            <div class="stat-card">
                <div class="stat-number" id="total-words">0</div>
                <div class="stat-label">Total Words</div>
            </div>
            <div class="stat-card stat-card-due">
                <div class="stat-number" id="due-words">0</div>
                <div class="stat-label">Due Now</div>
            </div>
        </div>
        
        <!-- Gamification Mini Widget -->
        <div id="gamification-widget" class="gamification-mini-widget">
            <div class="gamification-stats">
                <div class="gamification-item">
                    <span class="gamification-label">Level:</span>
                    <span class="gamification-level">1</span>
                </div>
                <div class="gamification-item">
                    <span class="gamification-label">XP:</span>
                    <span class="gamification-xp">0</span>
                </div>
                <div class="gamification-item">
                    <span class="gamification-label">Streak:</span>
                    <span class="study-streak">0 days</span>
                </div>
                <div class="gamification-item">
                    <span class="gamification-label">Accuracy:</span>
                    <span class="accuracy-rate">0%</span>
                </div>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="main-content" id="main-screen">
            <div class="action-buttons">
                <button id="start-review-btn" class="btn btn-primary">
                    <span class="btn-icon">üîÑ</span>
                    Start Review
                </button>
                
                <button id="view-all-words-btn" class="btn btn-secondary">
                    <span class="btn-icon">üìñ</span>
                    View All Words
                </button>
            </div>
            
            <div class="quick-actions">
                <button id="view-analytics-btn" class="btn btn-outline" title="View learning analytics">
                    <span class="btn-icon">üìä</span>
                    <!-- Analytics -->
                </button>
                <button id="settings-btn" class="btn btn-outline" title="Settings & Cloud Sync">
                    <span class="btn-icon">‚öôÔ∏è</span>
                    <!-- Settings -->
                </button>
                <button id="export-btn" class="btn btn-outline" title="Export vocabulary">
                    <span class="btn-icon">üì§</span>
                    <!-- Export -->
                </button>
                <button id="import-btn" class="btn btn-outline" title="Import vocabulary">
                    <span class="btn-icon">üì•</span>
                    <!-- Import -->
                </button>
                <button id="debug-storage" class="btn btn-outline" title="Debug storage" style="background: #ff9800; color: white;">
                    <span class="btn-icon">üîç</span>
                    Debug
                </button>
                <input type="file" id="import-file" accept=".json" style="display: none;">
            </div>
        </div>
        
        <!-- Review Screen -->
        <div class="review-screen" id="review-screen" style="display: none;">
            <div class="review-header">
                <button id="back-to-main" class="btn btn-text">
                    <span class="btn-icon">‚Üê</span> Back
                </button>
                <div class="review-progress">
                    <span id="current-card">1</span> / <span id="total-cards">10</span>
                </div>
            </div>
            
            <div class="flashcard" id="flashcard">
                <!-- Vietnamese meaning shown first -->
                <div class="meaning-card">
                    <div class="meaning-display" id="meaning-display">v√≠ d·ª•</div>
                    <div class="example-display" id="example-display" style="display: none;">This is an example sentence.</div>
                    
                    <div class="hint-section">
                        <button id="hint-btn" class="btn btn-hint">
                            <span class="btn-icon">üí°</span> Hint
                        </button>
                    </div>
                    
                    <div class="audio-section" style="display: none;">
                        <button id="play-audio-btn" class="btn btn-audio">
                            <span class="btn-icon">üîä</span> Pronunciation
                        </button>
                    </div>
                </div>
                
                <!-- Input section -->
                <div class="input-section" id="input-section">
                    <div class="input-prompt">What is the English word?</div>
                    <input type="text" id="answer-input" placeholder="Type your answer..." class="answer-input">
                    <div class="input-buttons">
                        <button id="submit-answer-btn" class="btn btn-primary">
                            <span class="btn-icon">‚úì</span> Check Answer
                        </button>
                        <button id="skip-word-btn" class="btn btn-outline">
                            <span class="btn-icon">‚è≠</span> Skip
                        </button>
                    </div>
                </div>
                
                <!-- Result section (shown after answer check) -->
                <div class="result-section" id="result-section" style="display: none;">
                    <div class="answer-comparison">
                        <div class="answer-row">
                            <span class="answer-label">Your answer:</span>
                            <span class="user-answer" id="user-answer">example</span>
                        </div>
                        <div class="answer-row">
                            <span class="answer-label">Correct answer:</span>
                            <span class="correct-answer" id="correct-answer">example</span>
                        </div>
                        <div class="phonetic-row">
                            <span class="phonetic-display" id="phonetic-display">/…™…°Ààz√¶mp…ôl/</span>
                        </div>
                    </div>
                    
                    <div class="quality-buttons">
                        <div class="quality-label">How difficult was this word?</div>
                        <div class="quality-row">
                            <button class="quality-btn quality-0" data-quality="0">0<br><small>Blackout</small></button>
                            <button class="quality-btn quality-1" data-quality="1">1<br><small>Incorrect</small></button>
                            <button class="quality-btn quality-2" data-quality="2">2<br><small>Hard</small></button>
                        </div>
                        <div class="quality-row">
                            <button class="quality-btn quality-3" data-quality="3">3<br><small>Correct</small></button>
                            <button class="quality-btn quality-4" data-quality="4">4<br><small>Easy</small></button>
                            <button class="quality-btn quality-5" data-quality="5">5<br><small>Perfect</small></button>
                        </div>
                    </div>
                    
                    <!-- Retype section for wrong/skipped answers -->
                    <div class="retype-section" id="retype-section" style="display: none;">
                        <div class="retype-prompt">Please type the correct word to continue:</div>
                        <input type="text" id="retype-input" placeholder="Type the correct word..." class="answer-input">
                        <button id="retype-submit-btn" class="btn btn-primary">
                            <span class="btn-icon">‚úì</span> Continue
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Word List Screen -->
        <div class="word-list-screen" id="word-list-screen" style="display: none;">
            <div class="list-header">
                <button id="back-from-list" class="btn btn-text">
                    <span class="btn-icon">‚Üê</span> Back
                </button>
                <h2>All Words</h2>
            </div>
            
            <div class="search-bar">
                <input type="text" id="search-input" placeholder="Search words...">
            </div>
            
            <div class="word-list" id="word-list">
                <!-- Word items will be populated here -->
            </div>
        </div>
        
        <!-- Review Complete Screen -->
        <div class="review-complete" id="review-complete" style="display: none;">
            <div class="complete-header">
                <div class="complete-icon">üéâ</div>
                <h2>Review Complete!</h2>
            </div>
            
            <div class="complete-stats">
                <div class="complete-stat">
                    <span class="stat-value" id="reviewed-count">0</span>
                    <span class="stat-text">words reviewed</span>
                </div>
                <div class="complete-stat">
                    <span class="stat-value" id="accuracy-rate">0%</span>
                    <span class="stat-text">accuracy</span>
                </div>
            </div>
            
            <button id="finish-review-btn" class="btn btn-primary">
                <span class="btn-icon">‚úì</span>
                Finish
            </button>
        </div>
        
        <!-- Loading and Error States -->
        <div class="loading-state" id="loading-state" style="display: none;">
            <div class="spinner"></div>
            <p>Loading...</p>
        </div>
        
        <div class="error-state" id="error-state" style="display: none;">
            <div class="error-icon">‚ö†Ô∏è</div>
            <p id="error-message">Something went wrong</p>
            <button id="retry-btn" class="btn btn-secondary">Try Again</button>
        </div>
        
    </div>
    
    <!-- Mock Chrome API for browser testing -->
    <script src="../js/mock-chrome.js"></script>
    
    <!-- Core Dependencies -->
    <script src="../js/popup.entry.js"></script>
</body>
</html>